<!DOCTYPE html>
<html lang="en">
<head>
  <title>Darchei.tech Homepage</title>
  <style>
    body {
      background: linear-gradient(45deg, lightpink, lightgreen, lightblue);
      font-family: Arial, sans-serif;
      padding: 25px;
    }
    #content {
      background-color: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.15);
    }
    button {
      background-color: yellow;
      border: none;
      border-radius: 10px;
      padding: 8px 15px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="content">Loading content...</div>

<script>
async function loadContent() {
  const params = new URLSearchParams(location.search);
  const code = params.get('code');

  if (!code) {
    document.getElementById('content').innerHTML = "<h2>No invite code found!</h2>";
    return;
  }

  const jsonUrl = 'https://raw.githubusercontent.com/shimonkolodny/Backup-html/main/Darchei.tech/links.json';

  try {
    const codesRes = await fetch(jsonUrl);
    if (!codesRes.ok) throw new Error('Could not load codes.json.');

    const codes = await codesRes.json();
    const htmlUrl = codes[code];

    if (!htmlUrl) {
      document.getElementById('content').innerHTML = "<h2>Invite code invalid.</h2>";
      return;
    }

    const htmlRes = await fetch(htmlUrl);
    if (!htmlRes.ok) throw new Error('Could not fetch HTML file.');

    const html = await htmlRes.text();
    document.getElementById('content').innerHTML = html;

  } catch (e) {
    document.getElementById('content').innerHTML = `<h2>Error:</h2><p>${e.message}</p>`;
  }
}

loadContent();
</script>

</body>
</html>
